{"version":3,"file":"index.m.js","sources":["index.js"],"sourcesContent":["Object.defineProperty(exports,\"__esModule\",{value:!0});var e=Object.assign||function(e){for(var t=arguments,i=1;i<arguments.length;i++){var n=t[i];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},t=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),i=require(\"react\"),n=function(n){function r(e){!function(e,t){if(!(e instanceof r))throw new TypeError(\"Cannot call a class as a function\")}(this);var t=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.state={noClamp:!1,text:\".\"},t.element=null,t.original=e.text,t.lineHeight=0,t.start=0,t.middle=0,t.end=0,t.debounced=t.debounce(t.action),t}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,i.Component),t(r,[{key:\"componentDidMount\",value:function(){window.addEventListener(\"resize\",this.debounced),this.props.text&&(this.lineHeight=this.element.clientHeight+1,this.clampLines())}},{key:\"componentWillUnmount\",value:function(){window.removeEventListener(\"resize\",this.debounced)}},{key:\"debounce\",value:function(e){var t=this,i=void 0,n=function(){i=null,e.apply(t)};return function(){var r=!i;clearTimeout(i),i=setTimeout(n,t.props.debounce),r&&e.apply(t)}}},{key:\"action\",value:function(){this.original&&this.setState({noClamp:!1},this.clampLines)}},{key:\"clampLines\",value:function(){var e=this,t=this.props,i=t.ellipsis,n=this.lineHeight*t.lines+1,o=i===r.defaultProps.ellipsis?5:1.2*i.length;for(this.start=0,this.middle=0,this.end=this.original.length;this.start<=this.end;){if(this.middle=Math.floor((this.start+this.end)/2),this.element.innerText=this.original.slice(0,this.middle),this.middle===this.original.length)return void this.setState({text:this.original,noClamp:!0});this.moveMarkers(n)}var s=this.original.slice(0,Math.max(this.middle-o,0)).trim()+i;this.setState({text:s},function(){e.element.innerText=e.state.text})}},{key:\"moveMarkers\",value:function(e){this.element.clientHeight<=e?this.start=this.middle+1:this.end=this.middle-1}},{key:\"render\",value:function(){var t=this,n=this.state.text,r=this.props,o=r.accessibility,s=r.is,l=r.text,a=function(e,t){var i={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n]);return i}(r,[\"accessibility\",\"is\",\"text\",\"lines\",\"debounce\",\"ellipsis\"]),u=e({ref:function(e){return t.element=e}},o?{title:l}:{},a);return l?(0,i.createElement)(s,u,n):null}}]),r}();n.defaultProps={accessibility:!0,is:\"div\",lines:3,ellipsis:\"â€¦\",debounce:300},exports.default=n;\n//# sourceMappingURL=index.js.map\n"],"names":["Object","defineProperty","exports","value","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","Constructor","protoProps","staticProps","_react","require","NanoClamp","_Component","instance","TypeError","this","_this","self","ReferenceError","__proto__","getPrototypeOf","state","noClamp","text","element","original","lineHeight","start","middle","end","debounced","debounce","action","subClass","superClass","create","constructor","setPrototypeOf","Component","window","addEventListener","clientHeight","clampLines","removeEventListener","func","_this2","timeout","later","apply","callNow","clearTimeout","setTimeout","setState","_this3","_props","ellipsis","maxHeight","lines","ellipsisLength","defaultProps","Math","floor","innerText","slice","moveMarkers","max","trim","_this4","_props2","accessibility","is","propText","obj","keys","indexOf","clampProps","ref","node","title","createElement","default"],"mappings":"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"}